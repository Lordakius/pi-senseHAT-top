%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[twoside,twocolumn]{article}

\usepackage[sc]{mathpazo} % Use the Palatino font
\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs
\linespread{1.05} % Line spacing - Palatino needs more space between lines
\usepackage{microtype} % Slightly tweak font spacing for aesthetics

\usepackage[english]{babel} % Language hyphenation and typographical rules

\usepackage[hmarginratio=1:1,top=32mm,columnsep=20pt]{geometry} % Document margins
\usepackage[hang, small,labelfont=bf,up,textfont=it,up]{caption} % Custom captions under/above floats in tables or figures
\usepackage{booktabs} % Horizontal rules in tables

\usepackage{lettrine} % The lettrine is the first enlarged letter at the beginning of the text

\usepackage{enumitem} % Customized lists
\setlist[itemize]{noitemsep} % Make itemize lists more compact

\usepackage{abstract} % Allows abstract customization
\renewcommand{\abstractnamefont}{\normalfont\bfseries} % Set the "Abstract" text to bold
\renewcommand{\abstracttextfont}{\normalfont\small\itshape} % Set the abstract itself to small italic text

\usepackage{titlesec} % Allows customization of titles
\renewcommand\thesection{\Roman{section}} % Roman numerals for the sections
\renewcommand\thesubsection{\roman{subsection}} % roman numerals for subsections
\titleformat{\section}[block]{\large\scshape\centering}{\thesection.}{1em}{} % Change the look of the section titles
\titleformat{\subsection}[block]{\large}{\thesubsection.}{1em}{} % Change the look of the section titles

\usepackage{fancyhdr} % Headers and footers
\pagestyle{fancy} % All pages have headers and footers
\fancyhead{} % Blank out the default header
\fancyfoot{} % Blank out the default footer
%\fancyhead[C]{Running title $\bullet$ May 2016 $\bullet$ Vol. XXI, No. 1} % Custom header text
\fancyfoot[RO,LE]{\thepage} % Custom footer text

\usepackage{titling} % Customizing the title section

\usepackage{hyperref} % For hyperlinks in the PDF

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\setlength{\droptitle}{-4\baselineskip} % Move the title up

\pretitle{\begin{center}\Huge\bfseries} % Article title formatting
\posttitle{\end{center}} % Article title closing formatting
\title{Implementing a top-interface for the SenseHat LED on a Raspberry Pi 3B} % Article title
\author{%
\textsc{Group 24} \\[1ex] % Your name
\normalsize Uppsala University \\ % Your institution
%\normalsize \href{mailto:john@smith.com}{john@smith.com} % Your email address
%\and % Uncomment if 2 authors are required, duplicate these 4 lines if more
%\textsc{Jane Smith}\thanks{Corresponding author} \\[1ex] % Second author's name
%\normalsize University of Utah \\ % Second author's institution
%\normalsize \href{mailto:jane@smith.com}{jane@smith.com} % Second author's email address
}
\date{\today} % Leave empty to omit a date
\renewcommand{\maketitlehookd}{%
\begin{abstract}
\noindent Monitoring computer systems is an important task for admins and users
alike. A common tool to display cpu information on UNIX-systems is top. This
work will present an example implementation of a similar interface for the
SenseHat LED system, which is installed onto the Raspberry Pi 3. We will compare
this setup with a web-based solution.
\end{abstract}
}

%----------------------------------------------------------------------------------------

\begin{document}

% Print the title
\maketitle

%----------------------------------------------------------------------------------------
%	ARTICLE CONTENTS
%----------------------------------------------------------------------------------------

\section{Introduction}

First we will explain how an UNIX-system (here: Debian) can provide the 
necessary interfaces to access the relevant information required. Then we will 
talk about the way top displays this information and how we can utilize the 
given $8\times8$ grid of the LED. Finally we will compare this implementation
with a (theoretical) web-based solution and discuss further improvements. 

%------------------------------------------------

\section{Kernel Interface}

Representing (kernel) data is not a new idea. The \textit{proc} filesystem 
mentioned by Killian\cite{Killian:1984} was used to map address space to files 
so that processes could access their own image. This was also used to improve 
debugging techniques as this was a major problem before. Today's systems expand 
this idea and also introduce other subfilesystems\cite{proc(5)}. We will focus 
on the \textit{stat}-filesystem, which displays kernel/system statistics.

As everything under UNIX is a file, so is the \textit{proc}-filesystem. To
access the data we can use any available fileoperations. When the file
\textit{/proc/stat} is read the kernel updates the file. This means whenever we
want to read the new state, we will have to reopen the file. An example output
can be seen on figure 1. %TODO:figure 1 ;)

\begin{figure}[]
	\caption{example content of \textit{/proc/stat}}
\end{figure}
%------------------------------------------------

\section{The top interface}

Top presents the user with both an overview of the system's resources and a list
of running processes with their associated values for cputime, memory usage et
cetera. This is done dynamically so changes made to the system can be observed
in real time. While this is helpful, the manpage describes it as a limited 
interactive interface for process manipulation. 

We also want to mention that there are many more implementations,
\textbf{htop} to name one, which provide similar functionality with a slightly
different user interface. 

%TODO:add figure of top interface?
%-------------------------------------------------

\section{Output}

\subsection{SenseHat LED}

Our hardware consist of a Raspberry Pi 3B with a connected SenseHat LED $8\times
8$ grid and a joystick. We decided to simplify the output to a general overview
of the systems cpu state. We have 4 cores and can read all relevant
information for each cpu and their sum from \textit{/proc/stat}. We decided to
utilize one row of the LED for each batch of data, with the first representing the
sum of all cpus, the second row the first cpu and so on. Every light represents
12.5 \% of cpu load. 

\subsection{Web-server}

Now assuming we install a web server on the system which serves a page showing
the current load. For simplicity we will assume a static page, generated by some
php code. While this setup is simple and easy, it is not real-time, as each
static page represents a snapshot of the system. On the other hand, further
information can be shown and the user interface is clean and common\footnote{by
	now one should assume that people know how the web works}.

\section{Results}

Our LED solution does work. It supplies the required information in an
understandable and, maybe more important, common way. The web based solution
does the same, while offering more possibilites in terms of space and design 
than the limited grid of the LED. 

Even though it is critical for such an interface to be in real-time, this web 
based approach can be used to display the history as graphs for better 
readability. One could also use a different approach and create a real-time 
display, altough this requires extensive knowledge in web development. 

%------------------------------------------------

\section{Discussion}

The results of the project should be taken with a grain of salt. The final
decision of the approach should take into account when and where users may have
to access this data. Is it even necessary to add another interface when one
could just connect via ssh and run well programmed solutions like \textbf{htop}?
Our prototype shows that while being a simple solution, it also omits a lot of
information which might be necessary for the accessing users, e.g. the name of
the process that produces the cpu load. Nevertheless, it could help to signal
that something might be wrong with the system in a figurative way. 

%----------------------------------------------------------------------------------------
%	REFERENCE LIST
%----------------------------------------------------------------------------------------

\begin{thebibliography}{99} % Bibliography - this is intentionally simple in this template

\bibitem[Killian, 1984]{Killian:1984}
T.~J.~ Killian (1984).
\newblock Processes as Files
\newblock {\em USENIX Association}, Summer Conference.

\bibitem[proc(5)]{proc(5)}
Linux man pages

\end{thebibliography}

%----------------------------------------------------------------------------------------

\end{document}

